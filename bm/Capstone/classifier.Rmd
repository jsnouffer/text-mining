---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.1'
      jupytext_version: 1.2.3
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python}
# %run imported_MBTI.py
```

```{python}
import pandas as pd
import numpy as np
import re
import nltk
from nltk.tokenize import word_tokenize
import pickle
```

```{python}
# %%time

print("loading E")
with open("/mnt/volume_nyc3_01/models/E.p", "rb") as file:
    E = pickle.load(file)
print("loading S")
with open("/mnt/volume_nyc3_01/models/S.p", "rb") as file:
    S = pickle.load(file)
print("loading T")
with open("/mnt/volume_nyc3_01/models/T.p", "rb") as file:
    T = pickle.load(file)
print("loading J")
with open("/mnt/volume_nyc3_01/models/J.p", "rb") as file:
    J = pickle.load(file)
```

```{python}
def more_magic(classifier):
    typerogy = lambda x, y: y[1] if x[0]==[1] else y[0]
    mpred = []
    mpred_prob = []
    mpred.append(typerogy(classifier.perform_magic(E), ['Introvert','Extrovert']))
    mpred.append(typerogy(classifier.perform_magic(S), ['Intuitive','Sensing']))
    mpred.append(typerogy(classifier.perform_magic(T), ['Feeling','Thinking']))
    mpred.append(typerogy(classifier.perform_magic(J), ['Perceiving','Judging']))
    for m in [E, S, T, J]:
        mpred_prob.append(classifier.perform_more_magic(m))
    tadaa = pd.DataFrame()
    tadaa['Type'] = mpred
    tadaa['Probability'] = mpred_prob
    return tadaa
```

```{python}
classifier = Classifier()
```

```{python}
entry = 'How is everybody doing? DOes anyone want to hook up at my place tonight?'
classifier.preprocess(entry, web=False)
entry = 'You are so stupid and this does not make sense'
classifier.preprocess(entry, web=False)
```

```{python}
more_magic(classifier)
```
